<!doctype html>
<html lang="en">

<head>
  <title>LFDC FEST</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="icon" href="http://www.lfdc.edu.in/images/logo.gif">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">



  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" href="#" onclick="home()">LFDC FEST</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#" onclick="home()">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" onclick="getStarted()">Events</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" onclick="showEvents()">Registered</a>
          </li>
        </ul>
      </div>

      <div class="d-flex flex-row justify-content-end">
        <img src="https://www.kindpng.com/picc/m/192-1925162_login-icon-png-transparent-png.png" id="loginicon" />
      </div>
    </div>
  </nav>

</head>

<body>
<!-- HOME PAGE -->
  <div id="sectionhomepage">
    <div class="bg-container">
      <div class="cultural-card">
        <h1 class="main-heading"> LFDC FEST</h1>
        <img src="http://www.lfdc.edu.in/images/logo.gif" class="lfdcimage" /><br>
        <button class="button" id="getstarted" onclick="getStarted()">Get started </button>
        <p id="error_getstarted"></p>
      </div>
    </div>
  </div>
<!-- LOGIN PAGE -->
  <div id="sectionloginpage">
    <div class="bg-container10 d-flex flex-row justify-content-center">
      <img src="" />
      <div class="loginpagecard">
        <p class="loginformword">LOGIN FORM</p>
        <form>
          <p><input type="text" id="login_user" placeholder="username" name="username" required></p>
          <p><input type="password" id="login_password" placeholder="password" name="password" required></p>
          <p id="login_error"></p>
          <button id="login_button" value="submit">submit</button>
        </form>

        <div class="d-flex flex-row">
          <p class="loginaccount"> Don't have an account?</p><br>
          <p class="signupword" onclick="display('sectionsignuppage')"> Sign Up</p>
        </div>
      </div>
    </div>
  </div>
<!-- SIGNUP PAGE -->
  <div id="sectionsignuppage">
    <div class="bg-container10 d-flex flex-row justify-content-center">
      <div class="signuppagecard">
        <p class="signupformword">SIGNUP FORM</p>
        <form method="post">
          <p><input type="text" placeholder="Enter Name" id="signup_name" name="username" required></p>
          <p><input type="text" placeholder="Enter Email" id="signup_email" name="email" required></p>
          <p><input type="number" placeholder="mobile number" id="signup_mobile" name="mobile" required></p>
          <p><input type="password" placeholder="password" id="signup_password" name="password" required></p>
          <p id="signup_error"></p>
          <button type="submit" id="signupbutton">Signup</button>
        </form>
        <div class="d-flex flex-row">
          <p class="signupaccount"> Already have an account? </p>
          <p class="loginword" onclick="display('sectionloginpage')"> login In</p>
        </div>
      </div>
    </div>
  </div>
<!-- USER DETAILS PAGE -->
  <div id="sectionloggedin">
    <div class="bg-container10 d-flex flex-row justify-content-center">
      <img src="" />
      <div class="loginpagecard" style="width: 30%;">
        <p class="loginformword">User Details</p>
        <b>Name:</b><i id="logged_user"></i><br>
        <b>Email:</b><i id="logged_email"></i><br>
        <b>Mobile:</b><i id="logged_mobile"></i><br>
        <button id="logout" style="background:red;color:black;border-radius:10px;">logout</button>
      </div>
    </div>
  </div>

<!-- EVENTS PAGE -->
  <div id="sectioneventspage">
    <div class="bg-container1">

      <div>
        <img src="arrow.png" style="height: 20px;width: 30px;" onclick="display('sectionhomepage')">
        <h1> MUSIC AND DANCE SHOWS</h1>
      </div>

      <div id="events">
        
      </div>

    </div>
  </div>


  
  <div id="section_event">
    <div class="bg-container2 d-flex flex-row justify-content-center">
      <img src="arrow.png" style="height: 20px;width: 40px;" onclick="display('sectioneventspage')">
      <div class="main_page_card">
        <img src="" id="concert_image" />

        <div class="main_page_text_card">
          <h2 id="concert_name"> - </h2>
          <div class="d-flex flex-row justify-content-end">
            <button class="registerbutton" id="register_button" onclick="display('section_registration')"> Register
            </button>
          </div>
          -----------------------------------------------------------------------------------------------------------------------------------------
          <div>
            <ul class="unordered-list">
              <li>
                <p id="concert_desc"> - </p>
              </li>
              <li>
                <p id="concert_date"> - </p>
              </li>
              <li>
                <p id="concert_venue"> - </p>
              </li>
              <li>
                <p id="concert_fee"> - </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div id="section_registration">
    
  </div>

  <div class="list-group" id="show_events" hidden>
  
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script type="text/javascript"
    src="https://d1tgh8fmlzexmh.cloudfront.net/ccbp-static-website/js/ccbp-ui-kit.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./index.js"></script>
  <script>
    function checkCookie(name) {
      // Split the cookie string into an array of individual cookies
      let cookies = document.cookie.split(';');

      // Loop through the cookies and check if the name matches
      for (let i = 0; i < cookies.length; i++) {
        let cookie = cookies[i].trim();
        if (cookie.startsWith(name + '=')) {
          // The cookie exists
          return true;
        }
      }

      // The cookie doesn't exist
      return false;
    }
    auth = checkCookie('auth');
    if (auth == true) {
      document.getElementById("loginicon").src = "./login.png";
      document.getElementById('error_getstarted').innerHTML = '';
      localStorage.setItem("isloggedin", 'true');
      let cookies = document.cookie.split(';');
      user = '';
      // Loop through the cookies and check if the name matches
      for (let i = 0; i < cookies.length; i++) {
        let cookie = cookies[i].trim();
        if (cookie.startsWith('auth=')) {
          user = cookie.split('=')[1];
        }
      }
      console.log(user);
      axios.get('http://localhost:8000/username_check.php?username=' + user)
        .then(function (response) {
          console.log("Cokkie there and exist");
          localStorage.setItem("isloggedin", 'true');
          localStorage.setItem("username", user);
          document.getElementById("loginicon").src = "./login.png";
        })
        .catch(function (error) {
          localStorage.setItem("isloggedin", 'false');
        });
    }
    else {
      localStorage.setItem("isloggedin", 'false');
    }
  </script>
</body>

</html>
